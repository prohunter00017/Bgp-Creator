(function (){'use strict';const  CONFIG={SCROLL_THRESHOLD:100,ANIMATION_DURATION:300,DEBOUNCE_DELAY:250,LAZY_LOADING_MARGIN:'50px',TOAST_DURATION:3000};let  isScrolling=false;let  scrollTimeout;function  debounce(func,wait,immediate){let  timeout;return  function  executedFunction(){const  context=this;const  args=arguments;const  later=function (){timeout=null;if (!immediate)func.apply(context,args);};const  callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if (callNow)func.apply(context,args);};}function  throttle(func,limit){let  inThrottle;return  function (){const  args=arguments;const  context=this;if (!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit);}}}function  isElementInViewport(el){const  rect=el.getBoundingClientRect();return (rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth));}function  smoothScrollTo(target,offset=0){const  element=typeof  target==='string' ? document.querySelector(target):target;if (!element)return ;const  targetPosition=element.offsetTop-offset;const  startPosition=window.pageYOffset;const  distance=targetPosition-startPosition;const  duration=Math.min(Math.abs(distance)*0.5,1000);let  start=null;function  animation(currentTime){if (start===null)start=currentTime;const  timeElapsed=currentTime-start;const  run=ease(timeElapsed,startPosition,distance,duration);window.scrollTo(0,run);if (timeElapsed<duration)requestAnimationFrame(animation);}function  ease(t,b,c,d){t/=d/2;if (t<1)return  c/2*t*t+b;t--;return -c/2*(t*(t-2)-1)+b;}requestAnimationFrame(animation);}function  initializeNavigation(){const  navbar=document.querySelector('.navbar');const  navLinks=document.querySelectorAll('.nav-link');const  mobileToggle=document.querySelector('.navbar-toggler');const  navbarCollapse=document.querySelector('.navbar-collapse');if (navbar){const  handleScroll=throttle(()=>{const  scrolled=window.scrollY>CONFIG.SCROLL_THRESHOLD;navbar.classList.toggle('navbar-scrolled',scrolled);if (scrolled){navbar.style.backgroundColor='rgba(255, 255, 255, 0.98)';}else {navbar.style.backgroundColor='rgba(255, 255, 255, 0.95)';}},16);window.addEventListener('scroll',handleScroll);}if (mobileToggle&&navbarCollapse){mobileToggle.addEventListener('click',(e)=>{e.preventDefault();const  isExpanded=mobileToggle.getAttribute('aria-expanded')==='true';mobileToggle.setAttribute('aria-expanded',!isExpanded);navbarCollapse.classList.toggle('show');navbarCollapse.classList.add('collapsing');setTimeout(()=>{navbarCollapse.classList.remove('collapsing');},CONFIG.ANIMATION_DURATION);});document.addEventListener('click',(e)=>{if (!navbar.contains(e.target)&&navbarCollapse.classList.contains('show')){mobileToggle.click();}});}navLinks.forEach(link=>{if (link.getAttribute('href').startsWith('#')){link.addEventListener('click',(e)=>{e.preventDefault();const  targetId=link.getAttribute('href').substring(1);const  targetElement=document.getElementById(targetId);if (targetElement){smoothScrollTo(targetElement,80);}});}});updateActiveNavigation();}function  updateActiveNavigation(){const  sections=document.querySelectorAll('section[id]');const  navLinks=document.querySelectorAll('.nav-link[href^=__PROTECTED_1__]');if (sections.length===0)return ;const  handleScroll=throttle(()=>{let  current='';sections.forEach(section=>{const  sectionTop=section.offsetTop-100;const  sectionHeight=section.offsetHeight;if (window.scrollY>=sectionTop&&window.scrollY<sectionTop+sectionHeight){current=section.getAttribute('id');}});navLinks.forEach(link=>{link.classList.remove('active');if (link.getAttribute('href')===`#${current}`){link.classList.add('active');}});},16);window.addEventListener('scroll',handleScroll);}function  enterFullscreen(element){const  elem=element||document.querySelector('.frame-wrap');if (!elem)return ;if (elem.requestFullscreen){elem.requestFullscreen();}else  if (elem.webkitRequestFullscreen){elem.webkitRequestFullscreen();}else  if (elem.mozRequestFullScreen){elem.mozRequestFullScreen();}else  if (elem.msRequestFullscreen){elem.msRequestFullscreen();}}function  exitFullscreen(){const  isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);if (!isFullscreen){return ;toast.addEventListener('hidden.bs.toast',()=>{toast.remove();});return  toast;}function  getOrCreateToastContainer(){let  container=document.querySelector('.toast-container');if (!container){container=document.createElement('div');container.className='toast-container position-fixed bottom-0 end-0 p-3';container.style.zIndex='9999';document.body.appendChild(container);}return  container;}function  initializeAccessibilityFeatures(){const  skipLink=document.querySelector('.visually-hidden-focusable');if (skipLink){skipLink.addEventListener('click',(e)=>{e.preventDefault();const  target=document.querySelector(skipLink.getAttribute('href'));if (target){target.focus();target.scrollIntoView({behavior:'smooth',block:'start'});}});}enhanceKeyboardNavigation();createLiveRegions();manageFocus();}function  enhanceKeyboardNavigation(){document.addEventListener('keydown',(e)=>{if (e.key==='Escape'){const  openDropdowns=document.querySelectorAll('.dropdown-menu.show');openDropdowns.forEach(dropdown=>{const  toggle=dropdown.previousElementSibling;if (toggle){bootstrap.Dropdown.getInstance(toggle)?.hide();}});const  openModals=document.querySelectorAll('.modal.show');openModals.forEach(modal=>{bootstrap.Modal.getInstance(modal)?.hide();});}});}function  createLiveRegions(){if (!document.querySelector('#aria-live-polite')){const  politeRegion=document.createElement('div');politeRegion.id='aria-live-polite';politeRegion.setAttribute('aria-live','polite');politeRegion.setAttribute('aria-atomic','true');politeRegion.className='visually-hidden';document.body.appendChild(politeRegion);}if (!document.querySelector('#aria-live-assertive')){const  assertiveRegion=document.createElement('div');assertiveRegion.id='aria-live-assertive';assertiveRegion.setAttribute('aria-live','assertive');assertiveRegion.setAttribute('aria-atomic','true');assertiveRegion.className='visually-hidden';document.body.appendChild(assertiveRegion);}}function  announceToScreenReader(message,priority='polite'){const  liveRegion=document.querySelector(`#aria-live-${priority}`);if (liveRegion){liveRegion.textContent=message;setTimeout(()=>{liveRegion.textContent='';},1000);}}function  manageFocus(){document.addEventListener('keydown',(e)=>{if (e.key==='Tab'){const  modal=document.querySelector('.modal.show');if (modal){const  focusableElements=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=__PROTECTED_36__])');if (focusableElements.length>0){const  firstElement=focusableElements[0];const  lastElement=focusableElements[focusableElements.length-1];if (e.shiftKey&&document.activeElement===firstElement){e.preventDefault();lastElement.focus();}else  if (!e.shiftKey&&document.activeElement===lastElement){e.preventDefault();firstElement.focus();}}}}});}window.reloadGame=function (){const  gameFrame=document.getElementById('gameFrame');const  gameLoading=document.getElementById('gameLoading');if (gameFrame){if (gameLoading){gameLoading.style.display='flex';gameLoading.style.opacity='1';}gameFrame.src=gameFrame.src;if (typeof  gtag!=='undefined'){gtag('event','game_reload',{'game_url':gameFrame.src});}}};window.toggleFullscreen=function (){const  gameContainer=document.querySelector('.game-container');if (!gameContainer)return ;const  isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);if (!isFullscreen){if (gameContainer.requestFullscreen){gameContainer.requestFullscreen();}else  if (gameContainer.webkitRequestFullscreen){gameContainer.webkitRequestFullscreen();}else  if (gameContainer.mozRequestFullScreen){gameContainer.mozRequestFullScreen();}else  if (gameContainer.msRequestFullscreen){gameContainer.msRequestFullscreen();}}else {if (document.exitFullscreen){document.exitFullscreen();}else  if (document.webkitExitFullscreen){document.webkitExitFullscreen();}else  if (document.mozCancelFullScreen){document.mozCancelFullScreen();}else  if (document.msExitFullscreen){document.msExitFullscreen();}}if (typeof  gtag!=='undefined'){gtag('event','game_fullscreen',{'action':isFullscreen ? 'exit':'enter'});}};window.openGameFullscreen=function (){const  gameEmbed=document.querySelector('meta[name=__PROTECTED_37__]');const  gameUrl=gameEmbed ? gameEmbed.content:document.getElementById('gameFrame')?.src;if (gameUrl){window.open(gameUrl,'_blank','fullscreen=yes,scrollbars=no,menubar=no,toolbar=no,location=no,status=no');if (typeof  gtag!=='undefined'){gtag('event','game_open_new_window',{'game_url':gameUrl});}}};window.copyToClipboard=function (text){if (navigator.clipboard){navigator.clipboard.writeText(text).then(()=>{createToast('Link copied to clipboard!','success');announceToScreenReader('Link copied to clipboard');}).catch (err=>{createToast('Failed to copy link','danger');});}else {const  textArea=document.createElement('textarea');textArea.value=text;textArea.style.position='fixed';textArea.style.left='-999999px';textArea.style.top='-999999px';document.body.appendChild(textArea);textArea.focus();textArea.select();try {document.execCommand('copy');createToast('Link copied to clipboard!','success');announceToScreenReader('Link copied to clipboard');}catch (err){createToast('Failed to copy link','danger');}document.body.removeChild(textArea);}};window.showToast=function (message,type='info'){createToast(message,type);};function  initialize(){try {initializeNavigation();initializeGameFeatures();initializeImageEnhancements();initializeSearchFeatures();initializeFormEnhancements();initializePerformanceFeatures();initializeAccessibilityFeatures();document.body.classList.add('js-loaded');}catch (error){}}if (document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initialize);}else {initialize();}document.addEventListener('visibilitychange',()=>{if (document.hidden){}else {}});})();if ('serviceWorker' in  navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js').then(registration=>{}).catch (error=>{});});}if (!document.querySelector('#dynamic-animations-css')){const  animationCSS=document.createElement('style');animationCSS.id='dynamic-animations-css';animationCSS.textContent=`
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .spin {
            animation: spin 1s linear infinite;
        }
        
        .js-loaded img {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .js-loaded img.loaded {
            opacity: 1;
        }
        
        .fullscreen-active {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            background: #000;
        }
        
        .fullscreen-active .game-iframe {
            border-radius: 0;
        }
        
        .search-match {
            animation: highlight 0.5s ease-in-out;
        }
        
        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(255, 193, 7, 0.2); }
            100% { background-color: transparent; }
        }
        
        .img-placeholder {
            background: linear-gradient(45deg, #f8f9fa 25%, transparent 25%), 
                        linear-gradient(-45deg, #f8f9fa 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #f8f9fa 75%), 
                        linear-gradient(-45deg, transparent 75%, #f8f9fa 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }
    `;document.head.appendChild(animationCSS);}